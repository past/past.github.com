<!doctype html>
<head>
  <title>Scrolled element test</title>
  <script>
    var count = 0;
    function changeTrigger() {
        var t = document.getElementById('trigger');
        if (!visible(t)) {
            return;
        }
        t.className = 't' + (count % 3);
        var vd = document.getElementById('visibleDiv');
        var colors = ['red', 'green', 'blue'];
        vd.innerText = 'Trigger color is ' + colors[count % 3];
        count++;
    }
	function visible(element) {
	    if (element.offsetWidth === 0 || element.offsetHeight === 0) return false;
	    var height = document.documentElement.clientHeight,
	        rects = element.getClientRects(),
	        /*on_top = function(r) {
	          var x = (r.left + r.right)/2, y = (r.top + r.bottom)/2;
	          document.elementFromPoint(x, y) === element;
	        };*/
		    on_top = function(r) {
			  for (var x = Math.floor(r.left), x_max = Math.ceil(r.right); x <= x_max; x++)
			  for (var y = Math.floor(r.top), y_max = Math.ceil(r.bottom); y <= y_max; y++) {
			    if (document.elementFromPoint(x, y) === element) return true;
			  }
			  return false;
			};
	        for (var i = 0, l = rects.length; i < l; i++) {
	      var r = rects[i],
	          in_viewport = r.top > 0 ? r.top <= height : (r.bottom > 0 && r.bottom <= height);
	      if (in_viewport && on_top(r)) return true;
	    }
	    return false;
	}
	var timer = setInterval(changeTrigger, 2000);
  </script>
  
  <style type="text/css">
  <!--
  #trigger {
       display: block;
       border: 1px solid black;
       width=100%;
       height=100px;
       text-align: center;
  }
  .t0 {
       background-color: #fdd;
  }
  .t1 {
      background-color: #dfd;
  }
  .t2 {
      background-color: #ddf;
  }
  .visibleDiv {
      position: fixed;
      left: 10px;
      bottom: 10px;
      background-color: #dfd;
      border: 1px solid black;
      width: 100%;
      text-align: center;
  }
  //-->
  </style>
  
</head>

  <div id="trigger" class="t0">
    Trigger area.
  </div>
  
  <div id="par1">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed erat et turpis hendrerit volutpat. Morbi porta orci ut mi egestas lobortis. Fusce vel lorem quis nunc blandit hendrerit. Donec pulvinar lorem id metus auctor non ultrices metus molestie. Nam eget ligula sed velit vehicula posuere a ac dui. Vestibulum viverra rutrum magna a eleifend. Fusce mi purus, vestibulum congue consequat vitae, cursus non tortor. Pellentesque eleifend erat sed tellus rhoncus nec fermentum ante mollis. Etiam eget ante mi. Sed pharetra fringilla elit, quis lobortis erat tincidunt non. Nullam rutrum urna quis nisl vestibulum facilisis. Sed id arcu sapien, eu rutrum eros. Cras sagittis aliquam erat at elementum. Morbi hendrerit ullamcorper ante, vel facilisis sapien consectetur a.
  </div>
  <div id="par2">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed erat et turpis hendrerit volutpat. Morbi porta orci ut mi egestas lobortis. Fusce vel lorem quis nunc blandit hendrerit. Donec pulvinar lorem id metus auctor non ultrices metus molestie. Nam eget ligula sed velit vehicula posuere a ac dui. Vestibulum viverra rutrum magna a eleifend. Fusce mi purus, vestibulum congue consequat vitae, cursus non tortor. Pellentesque eleifend erat sed tellus rhoncus nec fermentum ante mollis. Etiam eget ante mi. Sed pharetra fringilla elit, quis lobortis erat tincidunt non. Nullam rutrum urna quis nisl vestibulum facilisis. Sed id arcu sapien, eu rutrum eros. Cras sagittis aliquam erat at elementum. Morbi hendrerit ullamcorper ante, vel facilisis sapien consectetur a.
  </div>
  <div id="par3">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed erat et turpis hendrerit volutpat. Morbi porta orci ut mi egestas lobortis. Fusce vel lorem quis nunc blandit hendrerit. Donec pulvinar lorem id metus auctor non ultrices metus molestie. Nam eget ligula sed velit vehicula posuere a ac dui. Vestibulum viverra rutrum magna a eleifend. Fusce mi purus, vestibulum congue consequat vitae, cursus non tortor. Pellentesque eleifend erat sed tellus rhoncus nec fermentum ante mollis. Etiam eget ante mi. Sed pharetra fringilla elit, quis lobortis erat tincidunt non. Nullam rutrum urna quis nisl vestibulum facilisis. Sed id arcu sapien, eu rutrum eros. Cras sagittis aliquam erat at elementum. Morbi hendrerit ullamcorper ante, vel facilisis sapien consectetur a.
  </div>
  <div id="par4">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed erat et turpis hendrerit volutpat. Morbi porta orci ut mi egestas lobortis. Fusce vel lorem quis nunc blandit hendrerit. Donec pulvinar lorem id metus auctor non ultrices metus molestie. Nam eget ligula sed velit vehicula posuere a ac dui. Vestibulum viverra rutrum magna a eleifend. Fusce mi purus, vestibulum congue consequat vitae, cursus non tortor. Pellentesque eleifend erat sed tellus rhoncus nec fermentum ante mollis. Etiam eget ante mi. Sed pharetra fringilla elit, quis lobortis erat tincidunt non. Nullam rutrum urna quis nisl vestibulum facilisis. Sed id arcu sapien, eu rutrum eros. Cras sagittis aliquam erat at elementum. Morbi hendrerit ullamcorper ante, vel facilisis sapien consectetur a.
  </div>
  <div id="par5">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed erat et turpis hendrerit volutpat. Morbi porta orci ut mi egestas lobortis. Fusce vel lorem quis nunc blandit hendrerit. Donec pulvinar lorem id metus auctor non ultrices metus molestie. Nam eget ligula sed velit vehicula posuere a ac dui. Vestibulum viverra rutrum magna a eleifend. Fusce mi purus, vestibulum congue consequat vitae, cursus non tortor. Pellentesque eleifend erat sed tellus rhoncus nec fermentum ante mollis. Etiam eget ante mi. Sed pharetra fringilla elit, quis lobortis erat tincidunt non. Nullam rutrum urna quis nisl vestibulum facilisis. Sed id arcu sapien, eu rutrum eros. Cras sagittis aliquam erat at elementum. Morbi hendrerit ullamcorper ante, vel facilisis sapien consectetur a.
  </div>
  <div id="par6">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed erat et turpis hendrerit volutpat. Morbi porta orci ut mi egestas lobortis. Fusce vel lorem quis nunc blandit hendrerit. Donec pulvinar lorem id metus auctor non ultrices metus molestie. Nam eget ligula sed velit vehicula posuere a ac dui. Vestibulum viverra rutrum magna a eleifend. Fusce mi purus, vestibulum congue consequat vitae, cursus non tortor. Pellentesque eleifend erat sed tellus rhoncus nec fermentum ante mollis. Etiam eget ante mi. Sed pharetra fringilla elit, quis lobortis erat tincidunt non. Nullam rutrum urna quis nisl vestibulum facilisis. Sed id arcu sapien, eu rutrum eros. Cras sagittis aliquam erat at elementum. Morbi hendrerit ullamcorper ante, vel facilisis sapien consectetur a.
  </div>
  <div id="par7">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed erat et turpis hendrerit volutpat. Morbi porta orci ut mi egestas lobortis. Fusce vel lorem quis nunc blandit hendrerit. Donec pulvinar lorem id metus auctor non ultrices metus molestie. Nam eget ligula sed velit vehicula posuere a ac dui. Vestibulum viverra rutrum magna a eleifend. Fusce mi purus, vestibulum congue consequat vitae, cursus non tortor. Pellentesque eleifend erat sed tellus rhoncus nec fermentum ante mollis. Etiam eget ante mi. Sed pharetra fringilla elit, quis lobortis erat tincidunt non. Nullam rutrum urna quis nisl vestibulum facilisis. Sed id arcu sapien, eu rutrum eros. Cras sagittis aliquam erat at elementum. Morbi hendrerit ullamcorper ante, vel facilisis sapien consectetur a.
  </div>
  <div id="par8">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed erat et turpis hendrerit volutpat. Morbi porta orci ut mi egestas lobortis. Fusce vel lorem quis nunc blandit hendrerit. Donec pulvinar lorem id metus auctor non ultrices metus molestie. Nam eget ligula sed velit vehicula posuere a ac dui. Vestibulum viverra rutrum magna a eleifend. Fusce mi purus, vestibulum congue consequat vitae, cursus non tortor. Pellentesque eleifend erat sed tellus rhoncus nec fermentum ante mollis. Etiam eget ante mi. Sed pharetra fringilla elit, quis lobortis erat tincidunt non. Nullam rutrum urna quis nisl vestibulum facilisis. Sed id arcu sapien, eu rutrum eros. Cras sagittis aliquam erat at elementum. Morbi hendrerit ullamcorper ante, vel facilisis sapien consectetur a.
  </div>
  <div id="par9">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed erat et turpis hendrerit volutpat. Morbi porta orci ut mi egestas lobortis. Fusce vel lorem quis nunc blandit hendrerit. Donec pulvinar lorem id metus auctor non ultrices metus molestie. Nam eget ligula sed velit vehicula posuere a ac dui. Vestibulum viverra rutrum magna a eleifend. Fusce mi purus, vestibulum congue consequat vitae, cursus non tortor. Pellentesque eleifend erat sed tellus rhoncus nec fermentum ante mollis. Etiam eget ante mi. Sed pharetra fringilla elit, quis lobortis erat tincidunt non. Nullam rutrum urna quis nisl vestibulum facilisis. Sed id arcu sapien, eu rutrum eros. Cras sagittis aliquam erat at elementum. Morbi hendrerit ullamcorper ante, vel facilisis sapien consectetur a.
  </div>
  <div id="par10">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed erat et turpis hendrerit volutpat. Morbi porta orci ut mi egestas lobortis. Fusce vel lorem quis nunc blandit hendrerit. Donec pulvinar lorem id metus auctor non ultrices metus molestie. Nam eget ligula sed velit vehicula posuere a ac dui. Vestibulum viverra rutrum magna a eleifend. Fusce mi purus, vestibulum congue consequat vitae, cursus non tortor. Pellentesque eleifend erat sed tellus rhoncus nec fermentum ante mollis. Etiam eget ante mi. Sed pharetra fringilla elit, quis lobortis erat tincidunt non. Nullam rutrum urna quis nisl vestibulum facilisis. Sed id arcu sapien, eu rutrum eros. Cras sagittis aliquam erat at elementum. Morbi hendrerit ullamcorper ante, vel facilisis sapien consectetur a.
  </div>
  
  <div id="visibleDiv" class="visibleDiv">
    Trigger color is red.
  </div>
  
  <script>
   var _gaq = [['_setAccount', 'UA-1597317-5'], ['_trackPageview']];
   (function(d, t) {
    var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
    g.async = true; g.src = '//www.google-analytics.com/ga.js'; s.parentNode.insertBefore(g, s);
   })(document, 'script');
  </script>

</body>
</html>
